<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中东非市场产品及服务法规要求</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .search-container {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .filter-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background: white;
            font-size: 1rem;
            min-width: 180px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--secondary-color);
        }
        
        .main-content {
            display: flex;
            gap: 30px;
        }
        
        .country-sidebar {
            flex: 0 0 250px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
            position: sticky;
            top: 20px;
        }
        
        .country-list {
            list-style: none;
        }
        
        .country-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .country-item:hover {
            background: var(--light-color);
        }
        
        .country-item.active {
            background: var(--secondary-color);
            color: white;
        }
        
        .country-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .content-area {
            flex: 1;
            min-height: 600px;
        }
        
        .country-content {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            display: none;
        }
        
        .country-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .country-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .country-title {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .category {
            margin-bottom: 30px;
        }
        
        .category-header {
            background: var(--light-color);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            margin-bottom: 15px;
        }
        
        .category-header:hover {
            background: #dfe6e9;
        }
        
        .category-title {
            font-size: 1.3rem;
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .category-icon {
            transition: var(--transition);
        }
        
        .category-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            padding: 0 10px;
        }
        
        .requirement-card {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: var(--border-radius);
            padding: 20px;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .requirement-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .requirement-title {
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .requirement-desc {
            margin-bottom: 15px;
            color: #555;
        }
        
        .requirement-standard {
            background: #f8f9fa;
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-size: 0.9rem;
            border-left: 3px solid var(--secondary-color);
        }
        
        .requirement-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .requirement-authority {
            background: var(--light-color);
            padding: 5px 10px;
            border-radius: 20px;
            color: var(--dark-color);
        }
        
        .requirement-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .link {
            display: inline-block;
            padding: 6px 12px;
            background: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.85rem;
            transition: var(--transition);
        }
        
        .link:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            color: #7f8c8d;
            border-top: 1px solid #e1e8ed;
        }
        
        /* 管理员面板样式 */
        .admin-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }
        
        .admin-toggle {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .edit-form {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .export-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .country-sidebar {
                flex: 1;
                max-height: none;
                position: static;
            }
            
            .country-list {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 10px;
            }
            
            .country-item {
                margin-bottom: 0;
            }
        }
        
        @media (max-width: 768px) {
            .category-content {
                grid-template-columns: 1fr;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .filter-container {
                width: 100%;
            }
            
            .filter-select {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>中东非市场产品及服务法规要求</h1>
            <p class="subtitle">快速查询中东非各国产品合规、保修售后、数据隐私等法规要求，助力企业国际化合规经营</p>
        </div>
    </header>

    <div class="container">
        <!-- 管理员面板 -->
        <div class="admin-panel">
            <button class="admin-toggle" onclick="toggleAdminPanel()">数据管理</button>
            <button class="export-btn" onclick="exportData()">导出数据</button>
            
            <div class="edit-form" id="editForm">
                <h3>添加/编辑国家数据</h3>
                <div class="form-group">
                    <label>选择国家:</label>
                    <select class="form-control" id="editCountry">
                        <option value="">-- 选择国家 --</option>
                        <option value="沙特阿拉伯">沙特阿拉伯</option>
                        <option value="阿联酋">阿联酋</option>
                        <option value="卡塔尔">卡塔尔</option>
                        <option value="巴林">巴林</option>
                        <option value="科威特">科威特</option>
                        <option value="伊朗">伊朗</option>
                        <option value="埃及">埃及</option>
                        <option value="南非">南非</option>
                        <option value="阿尔及利亚">阿尔及利亚</option>
                        <option value="摩洛哥">摩洛哥</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>类别:</label>
                    <select class="form-control" id="editCategory">
                        <option value="产品合规要求">产品合规要求</option>
                        <option value="保修与售后服务">保修与售后服务</option>
                        <option value="信息披露与数据隐私">信息披露与数据隐私</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>要素名称:</label>
                    <input type="text" class="form-control" id="editElement" placeholder="例如：安全与质量标准">
                </div>
                
                <div class="form-group">
                    <label>法规要求:</label>
                    <textarea class="form-control" id="editRequirement" rows="3" placeholder="详细描述法规要求"></textarea>
                </div>
                
                <div class="form-group">
                    <label>相关标准:</label>
                    <textarea class="form-control" id="editStandard" rows="2" placeholder="相关标准信息"></textarea>
                </div>
                
                <div class="form-group">
                    <label>监管机构:</label>
                    <input type="text" class="form-control" id="editAuthority" placeholder="例如：GSO, SASO">
                </div>
                
                <div class="form-group">
                    <label>参考链接 (每行一个，格式: 文本|URL):</label>
                    <textarea class="form-control" id="editLinks" rows="3" placeholder="例如：GSO标准查询|https://www.gso.org.sa"></textarea>
                </div>
                
                <div class="admin-actions">
                    <button class="btn btn-primary" onclick="saveData()">保存</button>
                    <button class="btn btn-danger" onclick="clearForm()">清空</button>
                    <button class="btn" onclick="toggleAdminPanel()">关闭</button>
                </div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="搜索法规要求、标准或关键词...">
            </div>
            <div class="filter-container">
                <select class="filter-select" id="countryFilter">
                    <option value="">所有国家</option>
                </select>
                <select class="filter-select" id="categoryFilter">
                    <option value="">所有类别</option>
                    <option value="产品合规要求">产品合规要求</option>
                    <option value="保修与售后服务">保修与售后服务</option>
                    <option value="信息披露与数据隐私">信息披露与数据隐私</option>
                </select>
            </div>
        </div>

        <div class="main-content">
            <div class="country-sidebar">
                <h3 style="margin-bottom: 15px; color: var(--primary-color);">选择国家</h3>
                <ul class="country-list" id="countryList">
                    <!-- 国家列表将通过JavaScript动态生成 -->
                </ul>
            </div>

            <div class="content-area" id="contentArea">
                <!-- 内容将通过JavaScript动态生成 -->
                <div class="no-results" id="noResults" style="display: none;">
                    <p>未找到匹配的法规要求，请尝试其他搜索条件。</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>中东非市场法规要求查询系统 &copy; 2023</p>
            <p>数据来源：中东非市场各个国家产品及服务法规要求要点.xlsx | 
                <a href="javascript:void(0)" onclick="toggleAdminPanel()">数据管理</a> | 
                <a href="javascript:void(0)" onclick="exportData()">导出数据</a>
            </p>
        </div>
    </footer>

    <script>
        // 完整的数据结构
        let countriesData = {
            "沙特阿拉伯": {
                "产品合规要求": [
                    {
                        "要素": "安全与质量标准",
                        "要求": "所有进口及销售车辆必须符合 SASO 技术法规（Technical Regulations for Vehicles & Parts），并在进口前通过 SABER 平台取得产品符合性证书 (Certificate of Conformity, CoC)。不符合标准的车辆禁止清关。",
                        "标准": "参考后面链接（以下举例）\nGSO MV-2026 MY-D2\nSASO 2900: 2021 - 安全标准\nSASO DMS 认证 - 防盗系统\nSASO 2917: 2020 - 轮胎\nSASO CoC 认证",
                        "监管机构": "GSO\nSASO\nZATCA Vehicle Import Controls",
                        "参考链接": [
                            {"text": "GSO标准查询", "url": "https://www.gso.org.sa/store/standards?query=vehicle"},
                            {"text": "SASO官网", "url": "https://www.saso.gov.sa/en/pages/default.aspx"},
                            {"text": "ZATCA车辆进口服务", "url": "https://zatca.gov.sa/"}
                        ]
                    },
                    {
                        "要素": "环保与燃油经济性标准",
                        "要求": "所有轻型车辆必须符合 沙特燃油经济性标准（CAFE） 并张贴能效标签。排放需满足欧5及等效",
                        "标准": "参考链接（以下举例）\n《Technical Regulations for Motor Vehicles (2025 MY‑D3)》Euro 5 排放\nSASO 2847: 2025 - 油耗与标签",
                        "监管机构": "GSO\nSASO \nSaudi Energy Efficiency Center (SEEC)",
                        "参考链接": [
                            {"text": "GSO标准查询", "url": "https://www.gso.org.sa/store/standards?query=vehicle"},
                            {"text": "SASO官网", "url": "https://www.saso.gov.sa/en/pages/default.aspx"},
                            {"text": "SEEC官网", "url": "https://www.seec.gov.sa/en"}
                        ]
                    }
                ],
                "保修与售后服务": [
                    {
                        "要素": "法定保修期",
                        "要求": "无统一法定年限，但根据《商业代理法》，经销商需提供\"合理期限\"的保修（通常 ≥3年或100,000 km），并履行厂商承诺。",
                        "标准": "《Consumer Protection Law》Article 46 Compliance with applicable requirements：Economic operators who make available a product or a service to the consumer shall ensure that this product or service fully complies with standards and specifications, quality standards and other applicable terms and requirements.\nArticle 51：The economic operator shall be liable towards the consumer for any breach of legal warranty which becomes apparent within two years of the time of delivery of the product.",
                        "监管机构": "MOC + Commercial Agencies Law",
                        "参考链接": [
                            {"text": "消费者保护法", "url": "https://istitlaa.ncc.gov.sa/en/Trade/mci/Consumer/Pages/default.aspx?utm_source=chatgpt.com"}
                        ]
                    }
                ],
                "信息披露与数据隐私": [
                    {
                        "要素": "产品信息",
                        "要求": "经销商必须清晰披露车辆型号、规格、产地、价格、税费、保修等。",
                        "标准": "《Consumer Protection Law》Article 28: Disclosure requirements at contracting",
                        "监管机构": "MOC Consumer Protection Law — Art. 5–8",
                        "参考链接": [
                            {"text": "消费者保护法", "url": "https://istitlaa.ncc.gov.sa/en/Trade/mci/Consumer/Pages/default.aspx?utm_source=chatgpt.com"}
                        ]
                    }
                ]
            },
            "阿联酋": {
                "产品合规要求": [
                    {
                        "要素": "安全与质量标准",
                        "要求": "所有进入 UAE 市场的新车 必须取得 ESMA/联邦的 Type Approval 车辆型式认证（TAC）。包含：安全标准、制动、碰撞、照明、VIN、轮胎、ESMA 适用的 GSO/GCC 技术法规等。未获 TAC 不得进口与销售。",
                        "标准": "参考后面链接（以下为举例）\nGSO MV-2026 MY-D2\nUAE.S 2698:2024",
                        "监管机构": "ESMA（Emirates Authority for Standardization & Metrology）",
                        "参考链接": [
                            {"text": "GSO标准查询", "url": "https://www.gso.org.sa/store/standards?query=vehicle"},
                            {"text": "MOIAT官网", "url": "https://moiat.gov.ae/en/"}
                        ]
                    }
                ],
                "保修与售后服务": [
                    {
                        "要素": "法定保修期",
                        "要求": "UAE 法定保修由联邦消费者保护法框架规定：须提供明确书面保修，且保修条款必须透明、可理解并向用户披露。保修期限由制造商/经销商承诺，但必须合理并符合行业通常水平。常见：3–5 年。",
                        "标准": "《Federal Law No. 15/2020 On Consumer Protection》Article 10 - Obligation of the Supplier to implement the Warranty\n1.The Supplier shall implement all Warranties, provide the required spare parts and maintenance, replace the Good, or\nrefund its monetary value, and commit to After-Sales Service as regards the sold Goods, within the specified time limit.",
                        "监管机构": "MoE（Ministry of Economy）",
                        "参考链接": [
                            {"text": "消费者保护立法", "url": "https://www.moet.gov.ae/en/consumer-protection-legislations"}
                        ]
                    }
                ],
                "信息披露与数据隐私": [
                    {
                        "要素": "产品信息",
                        "要求": "经销商必须在销售前披露：价格、型号、配置、产地、保修条款、税费、能效等级、交车时间。所有信息须真实、完整、不得误导。",
                        "标准": "《Federal Law No. 15/2020 On Consumer Protection》 Article 8 - Price of Good and Service",
                        "监管机构": "MoE（Ministry of Economy）",
                        "参考链接": [
                            {"text": "消费者保护立法", "url": "https://www.moet.gov.ae/en/consumer-protection-legislations"}
                        ]
                    }
                ]
            },
            "卡塔尔": {
                "产品合规要求": [
                    {
                        "要素": "安全与质量标准",
                        "要求": "新车须符合 GSO / GCC 技术法规（Motor Vehicles technical regs），进口时需提交符合性证明（CoC / Certificate of Conformity）或相应型式批准文件；未合格车辆禁止投放市场。",
                        "标准": "参考后面链接（以下为举例）\nGSO MV-2026 MY-D2",
                        "监管机构": "GSO（Gulf Standardization Organization）；MoCI（Qatar Ministry of Commerce & Industry）",
                        "参考链接": [
                            {"text": "GSO标准查询", "url": "https://www.gso.org.sa/store/standards?query=vehicle"},
                            {"text": "MoCI官网", "url": "https://www.moci.gov.qa/en/"}
                        ]
                    }
                ],
                "保修与售后服务": [
                    {
                        "要素": "法定保修期",
                        "要求": "卡塔尔《消费者保护法》（Law No.8/2008）赋予消费者在商品不符合标准或有缺陷时要求修理/更换/退货的权利；厂商/经销商需在售前提供书面保修并在合同中明示条款",
                        "标准": "the supplier shall recall the commodity and provide the consumer with a refund or exchange, or repair the defect free of charge.",
                        "监管机构": "MoCI",
                        "参考链接": [
                            {"text": "消费者保护法", "url": "https://www.almeezan.qa/LawArticles.aspx?LawTreeSectionID=9819&language=en&lawId=2647&utm_source=chatgpt.com"}
                        ]
                    }
                ],
                "信息披露与数据隐私": []
            },
            "巴林": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "科威特": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "伊朗": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "埃及": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "南非": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "阿尔及利亚": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            },
            "摩洛哥": {
                "产品合规要求": [],
                "保修与售后服务": [],
                "信息披露与数据隐私": []
            }
        };

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            initCountryList();
            showCountry('沙特阿拉伯');
            
            // 搜索功能
            document.getElementById('searchInput').addEventListener('input', function() {
                filterContent();
            });
            
            // 筛选功能
            document.getElementById('countryFilter').addEventListener('change', filterContent);
            document.getElementById('categoryFilter').addEventListener('change', filterContent);
        });

        // 初始化国家列表
        function initCountryList() {
            const countryList = document.getElementById('countryList');
            const countryFilter = document.getElementById('countryFilter');
            
            Object.keys(countriesData).forEach(country => {
                // 添加到侧边栏
                const listItem = document.createElement('li');
                listItem.className = 'country-item';
                listItem.innerHTML = `
                    <div class="country-flag">${country.charAt(0)}</div>
                    <span>${country}</span>
                `;
                listItem.addEventListener('click', () => {
                    document.querySelectorAll('.country-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    listItem.classList.add('active');
                    showCountry(country);
                });
                countryList.appendChild(listItem);
                
                // 添加到筛选器
                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                countryFilter.appendChild(option);
            });
        }

        // 显示国家内容
        function showCountry(country) {
            const contentArea = document.getElementById('contentArea');
            const countryData = countriesData[country];
            
            let contentHTML = `
                <div class="country-content active" data-country="${country}">
                    <div class="country-header">
                        <h2 class="country-title">${country}法规要求</h2>
                    </div>
            `;
            
            // 遍历类别
            Object.keys(countryData).forEach(category => {
                if (countryData[category].length > 0) {
                    contentHTML += `
                        <div class="category" data-category="${category}">
                            <div class="category-header">
                                <h3 class="category-title">${category}</h3>
                                <span class="category-icon">▼</span>
                            </div>
                            <div class="category-content">
                    `;
                    
                    // 遍历该类别下的要求
                    countryData[category].forEach(requirement => {
                        let linksHTML = '';
                        if (requirement.参考链接 && requirement.参考链接.length > 0) {
                            linksHTML = requirement.参考链接.map(link => 
                                `<a href="${link.url}" target="_blank" class="link">${link.text}</a>`
                            ).join('');
                        }
                        
                        contentHTML += `
                            <div class="requirement-card" data-element="${requirement.要素}">
                                <h4 class="requirement-title">${requirement.要素}</h4>
                                <p class="requirement-desc">${requirement.要求}</p>
                                ${requirement.标准 ? `<div class="requirement-standard">${requirement.标准}</div>` : ''}
                                <div class="requirement-meta">
                                    <span class="requirement-authority">${requirement.监管机构}</span>
                                </div>
                                ${linksHTML ? `<div class="requirement-links">${linksHTML}</div>` : ''}
                            </div>
                        `;
                    });
                    
                    contentHTML += `
                            </div>
                        </div>
                    `;
                }
            });
            
            contentHTML += `</div>`;
            contentArea.innerHTML = contentHTML;
            
            // 添加类别折叠功能
            document.querySelectorAll('.category-header').forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    const icon = this.querySelector('.category-icon');
                    
                    if (content.style.display === 'none' || content.style.display === '') {
                        content.style.display = 'grid';
                        icon.textContent = '▼';
                    } else {
                        content.style.display = 'none';
                        icon.textContent = '▶';
                    }
                });
            });
            
            // 隐藏无结果提示
            document.getElementById('noResults').style.display = 'none';
        }

        // 筛选内容
        function filterContent() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedCountry = document.getElementById('countryFilter').value;
            const selectedCategory = document.getElementById('categoryFilter').value;
            
            let hasResults = false;
            
            // 遍历所有国家内容
            document.querySelectorAll('.country-content').forEach(countryContent => {
                const country = countryContent.getAttribute('data-country');
                let countryHasResults = false;
                
                // 如果选择了特定国家且不匹配，则隐藏
                if (selectedCountry && country !== selectedCountry) {
                    countryContent.style.display = 'none';
                    return;
                }
                
                // 遍历类别
                countryContent.querySelectorAll('.category').forEach(category => {
                    const categoryName = category.getAttribute('data-category');
                    let categoryHasResults = false;
                    
                    // 如果选择了特定类别且不匹配，则隐藏
                    if (selectedCategory && categoryName !== selectedCategory) {
                        category.style.display = 'none';
                        return;
                    }
                    
                    // 遍历要求卡片
                    category.querySelectorAll('.requirement-card').forEach(card => {
                        const element = card.getAttribute('data-element');
                        const text = card.textContent.toLowerCase();
                        
                        // 检查是否匹配搜索词
                        const matchesSearch = !searchTerm || text.includes(searchTerm);
                        
                        if (matchesSearch) {
                            card.style.display = 'block';
                            categoryHasResults = true;
                            countryHasResults = true;
                            hasResults = true;
                        } else {
                            card.style.display = 'none';
                        }
                    });
                    
                    // 显示/隐藏类别
                    category.style.display = categoryHasResults ? 'block' : 'none';
                    
                    // 如果类别有结果，展开内容
                    if (categoryHasResults) {
                        category.querySelector('.category-content').style.display = 'grid';
                        category.querySelector('.category-icon').textContent = '▼';
                    }
                });
                
                // 显示/隐藏国家内容
                countryContent.style.display = countryHasResults ? 'block' : 'none';
            });
            
            // 显示/隐藏无结果提示
            document.getElementById('noResults').style.display = hasResults ? 'none' : 'block';
        }

        // 数据管理功能
        function toggleAdminPanel() {
            const form = document.getElementById('editForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        function saveData() {
            const country = document.getElementById('editCountry').value;
            const category = document.getElementById('editCategory').value;
            const element = document.getElementById('editElement').value;
            const requirement = document.getElementById('editRequirement').value;
            const standard = document.getElementById('editStandard').value;
            const authority = document.getElementById('editAuthority').value;
            const linksText = document.getElementById('editLinks').value;
            
            if (!country || !category || !element || !requirement) {
                alert('请填写必填字段：国家、类别、要素名称和法规要求');
                return;
            }
            
            // 解析链接
            const links = [];
            if (linksText) {
                const linkLines = linksText.split('\n');
                linkLines.forEach(line => {
                    const parts = line.split('|');
                    if (parts.length === 2) {
                        links.push({
                            text: parts[0].trim(),
                            url: parts[1].trim()
                        });
                    }
                });
            }
            
            // 确保国家数据结构存在
            if (!countriesData[country]) {
                countriesData[country] = {
                    "产品合规要求": [],
                    "保修与售后服务": [],
                    "信息披露与数据隐私": []
                };
            }
            
            // 查找是否已存在相同要素
            const existingIndex = countriesData[country][category].findIndex(item => item.要素 === element);
            
            const newItem = {
                要素: element,
                要求: requirement,
                标准: standard,
                监管机构: authority,
                参考链接: links
            };
            
            if (existingIndex >= 0) {
                // 更新现有项
                countriesData[country][category][existingIndex] = newItem;
            } else {
                // 添加新项
                countriesData[country][category].push(newItem);
            }
            
            // 重新加载显示当前国家
            showCountry(country);
            
            // 清空表单
            clearForm();
            
            alert('数据保存成功！');
        }

        function clearForm() {
            document.getElementById('editElement').value = '';
            document.getElementById('editRequirement').value = '';
            document.getElementById('editStandard').value = '';
            document.getElementById('editAuthority').value = '';
            document.getElementById('editLinks').value = '';
        }

        function exportData() {
            const dataStr = JSON.stringify(countriesData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = '中东非市场法规数据.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>